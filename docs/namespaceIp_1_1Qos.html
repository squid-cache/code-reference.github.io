<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Squid Web Cache: Ip::Qos Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Squid Web Cache<span id="projectnumber">&#160;master</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceIp_1_1Qos.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Ip::Qos Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIp_1_1Qos_1_1Config.html">Config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a4e05130943d49767946ade3e7e50d5ec" id="r_a4e05130943d49767946ade3e7e50d5ec"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">ConnectionDirection</a> { <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ecac94474857ae419ca1d01cd7539c7830f">dirAccepted</a>
, <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ecacf33dfc319a70aa5ef04974538d7358f">dirOpened</a>
 }</td></tr>
<tr class="memdesc:a4e05130943d49767946ade3e7e50d5ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible Squid roles in connection handling.  <a href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">More...</a><br /></td></tr>
<tr class="separator:a4e05130943d49767946ade3e7e50d5ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a174a31c2eabe8d827f79bdc799be270b" id="r_a174a31c2eabe8d827f79bdc799be270b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a174a31c2eabe8d827f79bdc799be270b">getTosFromServer</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;<a class="el" href="basic__radius__auth_8cc.html#aa8195632e4f244f5dbb6f0728cce9682">server</a>, <a class="el" href="classfde.html">fde</a> *clientFde)</td></tr>
<tr class="separator:a174a31c2eabe8d827f79bdc799be270b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda9a3cf84ab9ba0f256dd8a134658aa" id="r_afda9a3cf84ab9ba0f256dd8a134658aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ip_2forward_8h.html#a97c100bfdf1138ccbdd5de5d0901f720">nfmark_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#afda9a3cf84ab9ba0f256dd8a134658aa">getNfConnmark</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn, const <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">ConnectionDirection</a> connDir)</td></tr>
<tr class="separator:afda9a3cf84ab9ba0f256dd8a134658aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2243acee556f7a7ec0041da16459d0f9" id="r_a2243acee556f7a7ec0041da16459d0f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a2243acee556f7a7ec0041da16459d0f9">setNfConnmark</a> (<a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn, const <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">ConnectionDirection</a> connDir, const <a class="el" href="classIp_1_1NfMarkConfig.html">NfMarkConfig</a> &amp;cm)</td></tr>
<tr class="separator:a2243acee556f7a7ec0041da16459d0f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2605e4add905a8db95e453904fc821" id="r_a8c2605e4add905a8db95e453904fc821"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a8c2605e4add905a8db95e453904fc821">doTosLocalMiss</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn, const <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177d">hier_code</a> hierCode)</td></tr>
<tr class="separator:a8c2605e4add905a8db95e453904fc821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4475c57093eddcf462cbe95a074230d" id="r_ab4475c57093eddcf462cbe95a074230d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#ab4475c57093eddcf462cbe95a074230d">doNfmarkLocalMiss</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn, const <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177d">hier_code</a> hierCode)</td></tr>
<tr class="separator:ab4475c57093eddcf462cbe95a074230d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0228f1ab3df2b3b2bd54fac7f4b89b" id="r_adc0228f1ab3df2b3b2bd54fac7f4b89b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#adc0228f1ab3df2b3b2bd54fac7f4b89b">doTosLocalHit</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn)</td></tr>
<tr class="separator:adc0228f1ab3df2b3b2bd54fac7f4b89b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ab24bd5dd147beeb5d2bbdb5a192de" id="r_a53ab24bd5dd147beeb5d2bbdb5a192de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a53ab24bd5dd147beeb5d2bbdb5a192de">doNfmarkLocalHit</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn)</td></tr>
<tr class="separator:a53ab24bd5dd147beeb5d2bbdb5a192de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa320dc24fac9b1952edaea803a3dd9a" id="r_aaa320dc24fac9b1952edaea803a3dd9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#aaa320dc24fac9b1952edaea803a3dd9a">setSockTos</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn, <a class="el" href="ip_2forward_8h.html#a6bd5fd9a27e152eb6dd4faa68729f310">tos_t</a> tos)</td></tr>
<tr class="separator:aaa320dc24fac9b1952edaea803a3dd9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a488037b6f001b644eaf0967989d2b5dc" id="r_a488037b6f001b644eaf0967989d2b5dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a488037b6f001b644eaf0967989d2b5dc">setSockTos</a> (const <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> fd, <a class="el" href="ip_2forward_8h.html#a6bd5fd9a27e152eb6dd4faa68729f310">tos_t</a> tos, <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> type)</td></tr>
<tr class="separator:a488037b6f001b644eaf0967989d2b5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebe4081962f547bada77396ee0d56b00" id="r_aebe4081962f547bada77396ee0d56b00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#aebe4081962f547bada77396ee0d56b00">setSockNfmark</a> (const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;conn, <a class="el" href="ip_2forward_8h.html#a97c100bfdf1138ccbdd5de5d0901f720">nfmark_t</a> mark)</td></tr>
<tr class="separator:aebe4081962f547bada77396ee0d56b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6278e5b1e7c565a08e9f1312b9272b5" id="r_ac6278e5b1e7c565a08e9f1312b9272b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#ac6278e5b1e7c565a08e9f1312b9272b5">setSockNfmark</a> (const <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> fd, <a class="el" href="ip_2forward_8h.html#a97c100bfdf1138ccbdd5de5d0901f720">nfmark_t</a> mark)</td></tr>
<tr class="separator:ac6278e5b1e7c565a08e9f1312b9272b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a82d2b4c8d940bbb4853ccafbb33da971" id="r_a82d2b4c8d940bbb4853ccafbb33da971"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIp_1_1Qos_1_1Config.html">Config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceIp_1_1Qos.html#a82d2b4c8d940bbb4853ccafbb33da971">TheConfig</a></td></tr>
<tr class="memdesc:a82d2b4c8d940bbb4853ccafbb33da971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Globally available instance of <a class="el" href="classIp_1_1Qos_1_1Config.html">Qos::Config</a>.  <br /></td></tr>
<tr class="separator:a82d2b4c8d940bbb4853ccafbb33da971"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>QOS namespace contains all the QOS functionality: global functions within the namespace and the configuration parameters within a config class. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a4e05130943d49767946ade3e7e50d5ec" name="a4e05130943d49767946ade3e7e50d5ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e05130943d49767946ade3e7e50d5ec">&#9670;&#160;</a></span>ConnectionDirection</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">Ip::Qos::ConnectionDirection</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4e05130943d49767946ade3e7e50d5ecac94474857ae419ca1d01cd7539c7830f" name="a4e05130943d49767946ade3e7e50d5ecac94474857ae419ca1d01cd7539c7830f"></a>dirAccepted&#160;</td><td class="fielddoc"><p>accepted (from a client by Squid) </p>
</td></tr>
<tr><td class="fieldname"><a id="a4e05130943d49767946ade3e7e50d5ecacf33dfc319a70aa5ef04974538d7358f" name="a4e05130943d49767946ade3e7e50d5ecacf33dfc319a70aa5ef04974538d7358f"></a>dirOpened&#160;</td><td class="fielddoc"><p>opened (by Squid to an origin server or peer) </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="QosConfig_8h_source.html#l00070">70</a> of file <a class="el" href="QosConfig_8h_source.html">QosConfig.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a53ab24bd5dd147beeb5d2bbdb5a192de" name="a53ab24bd5dd147beeb5d2bbdb5a192de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ab24bd5dd147beeb5d2bbdb5a192de">&#9670;&#160;</a></span>doNfmarkLocalHit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::doNfmarkLocalHit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to work out and then apply to the socket the appropriate netfilter mark value to set on packets when items <em>have</em> been retrieved from local cache. Called by <a class="el" href="classclientReplyContext.html#ab69b7434816d39d17b0bcf47825704a4">clientReplyContext::doGetMoreData</a> if QOS is enabled for TOS. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Descriptor of socket to set the mark for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00280">280</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="namespaceIp_1_1Qos.html#aebe4081962f547bada77396ee0d56b00">setSockNfmark()</a>, and <a class="el" href="namespaceIp_1_1Qos.html#a82d2b4c8d940bbb4853ccafbb33da971">TheConfig</a>.</p>

<p class="reference">Referenced by <a class="el" href="classclientReplyContext.html#ab69b7434816d39d17b0bcf47825704a4">clientReplyContext::doGetMoreData()</a>.</p>

</div>
</div>
<a id="ab4475c57093eddcf462cbe95a074230d" name="ab4475c57093eddcf462cbe95a074230d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4475c57093eddcf462cbe95a074230d">&#9670;&#160;</a></span>doNfmarkLocalMiss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::doNfmarkLocalMiss </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177d">hier_code</a>&#160;</td>
          <td class="paramname"><em>hierCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to work out and then apply to the socket the appropriate netfilter mark value to set on packets when items have not been retrieved from local cache. Called by <a class="el" href="classclientReplyContext.html#ab7bb9cba9e77c4e81cf83757464a4974">clientReplyContext::sendMoreData</a> if QOS is enabled for TOS. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Descriptor of socket to set the mark for </td></tr>
    <tr><td class="paramname">hierCode</td><td>Hier code of request </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00252">252</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="classComm_1_1Connection.html#a8e53f4d6fd38545947a5aac6efb98fca">Comm::Connection::fd</a>, <a class="el" href="fde_8h.html#a0f820c6a388ea0380a19a97713736a35">fd_table</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#a265b59df5cf86e408c48285e069dfb33">Ip::Qos::Config::markMiss</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#a3b5e3d22c8bef4a4d0882ba76c45dcfd">Ip::Qos::Config::markMissMask</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#a0d8c6d5ab04b79f962785bd0cd0303de">Ip::Qos::Config::markParentHit</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#ac68162b7a50d095ba918fde5acb5f4e2">Ip::Qos::Config::markSiblingHit</a>, <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177da4e414b3bd28bffa1221e417edafdf8bd">PARENT_HIT</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#a6891eb542cbe8e1836b6934cbddb730f">Ip::Qos::Config::preserveMissMarkMask</a>, <a class="el" href="namespaceIp_1_1Qos.html#aebe4081962f547bada77396ee0d56b00">setSockNfmark()</a>, <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177da71997b9847150b787d135b5bbe856ce1">SIBLING_HIT</a>, and <a class="el" href="namespaceIp_1_1Qos.html#a82d2b4c8d940bbb4853ccafbb33da971">TheConfig</a>.</p>

<p class="reference">Referenced by <a class="el" href="classclientReplyContext.html#ab7bb9cba9e77c4e81cf83757464a4974">clientReplyContext::sendMoreData()</a>.</p>

</div>
</div>
<a id="adc0228f1ab3df2b3b2bd54fac7f4b89b" name="adc0228f1ab3df2b3b2bd54fac7f4b89b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc0228f1ab3df2b3b2bd54fac7f4b89b">&#9670;&#160;</a></span>doTosLocalHit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::doTosLocalHit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to work out and then apply to the socket the appropriate TOS value to set on packets when items <em>have</em> been retrieved from local cache. Called by <a class="el" href="classclientReplyContext.html#ab69b7434816d39d17b0bcf47825704a4">clientReplyContext::doGetMoreData</a> if QOS is enabled for TOS. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Descriptor of socket to set the TOS for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00273">273</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="namespaceIp_1_1Qos.html#aaa320dc24fac9b1952edaea803a3dd9a">setSockTos()</a>, and <a class="el" href="namespaceIp_1_1Qos.html#a82d2b4c8d940bbb4853ccafbb33da971">TheConfig</a>.</p>

<p class="reference">Referenced by <a class="el" href="classclientReplyContext.html#ab69b7434816d39d17b0bcf47825704a4">clientReplyContext::doGetMoreData()</a>.</p>

</div>
</div>
<a id="a8c2605e4add905a8db95e453904fc821" name="a8c2605e4add905a8db95e453904fc821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2605e4add905a8db95e453904fc821">&#9670;&#160;</a></span>doTosLocalMiss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::doTosLocalMiss </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177d">hier_code</a>&#160;</td>
          <td class="paramname"><em>hierCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to work out and then apply to the socket the appropriate TOS value to set on packets when items have not been retrieved from local cache. Called by <a class="el" href="classclientReplyContext.html#ab7bb9cba9e77c4e81cf83757464a4974">clientReplyContext::sendMoreData</a> if QOS is enabled for TOS. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Descriptor of socket to set the TOS for </td></tr>
    <tr><td class="paramname">hierCode</td><td>Hier code of request </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00231">231</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="classComm_1_1Connection.html#a8e53f4d6fd38545947a5aac6efb98fca">Comm::Connection::fd</a>, <a class="el" href="fde_8h.html#a0f820c6a388ea0380a19a97713736a35">fd_table</a>, <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177da4e414b3bd28bffa1221e417edafdf8bd">PARENT_HIT</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#a294f3d422b65a0f676e7e21f7932b2d2">Ip::Qos::Config::preserveMissTosMask</a>, <a class="el" href="namespaceIp_1_1Qos.html#aaa320dc24fac9b1952edaea803a3dd9a">setSockTos()</a>, <a class="el" href="hier__code_8h.html#a8836a137c62397b51ab64e564c94177da71997b9847150b787d135b5bbe856ce1">SIBLING_HIT</a>, <a class="el" href="namespaceIp_1_1Qos.html#a82d2b4c8d940bbb4853ccafbb33da971">TheConfig</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#a12776f1d2be00677b9c5d6fffbe0a680">Ip::Qos::Config::tosMiss</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#aa274180879c2e63779f14c4103160696">Ip::Qos::Config::tosMissMask</a>, <a class="el" href="classIp_1_1Qos_1_1Config.html#ad493c54904d8f54ee2df8e4fcc4e77a3">Ip::Qos::Config::tosParentHit</a>, and <a class="el" href="classIp_1_1Qos_1_1Config.html#aae27fcdc96754e1c50d6d43fa2a063b8">Ip::Qos::Config::tosSiblingHit</a>.</p>

<p class="reference">Referenced by <a class="el" href="classclientReplyContext.html#ab7bb9cba9e77c4e81cf83757464a4974">clientReplyContext::sendMoreData()</a>.</p>

</div>
</div>
<a id="afda9a3cf84ab9ba0f256dd8a134658aa" name="afda9a3cf84ab9ba0f256dd8a134658aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afda9a3cf84ab9ba0f256dd8a134658aa">&#9670;&#160;</a></span>getNfConnmark()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ip_2forward_8h.html#a97c100bfdf1138ccbdd5de5d0901f720">nfmark_t</a> Ip::Qos::getNfConnmark </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">ConnectionDirection</a>&#160;</td>
          <td class="paramname"><em>connDir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to retrieve the netfilter CONNMARK value of the connection. Called by <a class="el" href="classFwdState.html#a8d1bc18981cea8c1137d8c746f2d510e">FwdState::dispatch</a> if QOS options are enabled or by <a class="el" href="classComm_1_1TcpAcceptor.html#afa3d85f1354a7388545f767108681d09">Comm::TcpAcceptor::acceptOne</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Pointer to connection to get mark for </td></tr>
    <tr><td class="paramname">connDir</td><td>Specifies connection type (incoming or outgoing) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00151">151</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ecac94474857ae419ca1d01cd7539c7830f">dirAccepted</a>, <a class="el" href="classComm_1_1Connection.html#a84e6544b719c79cbecbc7d2a891fbcb2">Comm::Connection::local</a>, <a class="el" href="classComm_1_1Connection.html#a60e1b863400f49a2ed17054982561f17">Comm::Connection::remote</a>, and <a class="el" href="xstrerror_8cc.html#a3d643f764de4776e5489d4eb55a99849">xstrerr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classComm_1_1TcpAcceptor.html#acd497e123d0057b83bcb9d885c4d1476">Comm::TcpAcceptor::acceptInto()</a>, and <a class="el" href="classFwdState.html#a8d1bc18981cea8c1137d8c746f2d510e">FwdState::dispatch()</a>.</p>

</div>
</div>
<a id="a174a31c2eabe8d827f79bdc799be270b" name="a174a31c2eabe8d827f79bdc799be270b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a174a31c2eabe8d827f79bdc799be270b">&#9670;&#160;</a></span>getTosFromServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Ip::Qos::getTosFromServer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfde.html">fde</a> *&#160;</td>
          <td class="paramname"><em>clientFde</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to retrieve the TOS value of the inbound packet. Called by <a class="el" href="classFwdState.html#a8d1bc18981cea8c1137d8c746f2d510e">FwdState::dispatch</a> if QOS options are enabled. Bug 2537: This part of ZPH only applies to patched Linux kernels </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td><a class="el" href="classServer.html">Server</a> side descriptor of connection to get TOS for </td></tr>
    <tr><td class="paramname">clientFde</td><td>Pointer to client side fde instance to set tosFromServer in </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00048">48</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="structcmsghdr.html#afe7b2cef33007f1424d7abefd076881f">cmsghdr::cmsg_len</a>, <a class="el" href="cmsg_8h.html#a1cf31f7d0320e1fa024ebced6d54c8b9">CMSG_LEN</a>, <a class="el" href="structcmsghdr.html#ac0ff1400cb63fbc2e0ece19434cb8fef">cmsghdr::cmsg_level</a>, <a class="el" href="structcmsghdr.html#a4c7cabf7899a688ce10bc92773fca9c1">cmsghdr::cmsg_type</a>, <a class="el" href="debug_2Stream_8h.html#ad1f6f001d275799243ee96d0b1519d3a">DBG_IMPORTANT</a>, <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="basic__radius__auth_8cc.html#aa8195632e4f244f5dbb6f0728cce9682">server</a>, <a class="el" href="cmsg_8h.html#aeeb3fe63616a442e6b5198f88779c2ff">SQUID_CMSG_DATA</a>, <a class="el" href="classfde.html#ae66dcfec8476eba38b631d9a256495a0">fde::tosFromServer</a>, <a class="el" href="socket_8h.html#a66a824c27f316bb40307eb8c1c0eaabd">xgetsockopt()</a>, <a class="el" href="socket_8h.html#a712fdb6a1f96f6ba746ef8da018bb216">xsetsockopt()</a>, and <a class="el" href="xstrerror_8cc.html#a3d643f764de4776e5489d4eb55a99849">xstrerr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFwdState.html#a8d1bc18981cea8c1137d8c746f2d510e">FwdState::dispatch()</a>.</p>

</div>
</div>
<a id="a2243acee556f7a7ec0041da16459d0f9" name="a2243acee556f7a7ec0041da16459d0f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2243acee556f7a7ec0041da16459d0f9">&#9670;&#160;</a></span>setNfConnmark()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Ip::Qos::setNfConnmark </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ec">ConnectionDirection</a>&#160;</td>
          <td class="paramname"><em>connDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIp_1_1NfMarkConfig.html">NfMarkConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>cm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to set the netfilter CONNMARK value on the connection. Called by <a class="el" href="classClientHttpRequest.html#ab992ab634582a805bf248e2e311403e1">ClientHttpRequest::doCallouts</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Pointer to connection to set mark on </td></tr>
    <tr><td class="paramname">connDir</td><td>Specifies connection type (incoming or outgoing) @cm Netfilter mark configuration (mark and mask) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00186">186</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="classIp_1_1NfMarkConfig.html#ac0308defb454a05531436c80e4fd508b">Ip::NfMarkConfig::applyToMark()</a>, <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="namespaceIp_1_1Qos.html#a4e05130943d49767946ade3e7e50d5ecac94474857ae419ca1d01cd7539c7830f">dirAccepted</a>, <a class="el" href="classComm_1_1Connection.html#a84e6544b719c79cbecbc7d2a891fbcb2">Comm::Connection::local</a>, <a class="el" href="classComm_1_1Connection.html#a922c278c45ff97ab49c82fe161d45245">Comm::Connection::nfConnmark</a>, <a class="el" href="classComm_1_1Connection.html#a60e1b863400f49a2ed17054982561f17">Comm::Connection::remote</a>, and <a class="el" href="xstrerror_8cc.html#a3d643f764de4776e5489d4eb55a99849">xstrerr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classClientHttpRequest.html#ab992ab634582a805bf248e2e311403e1">ClientHttpRequest::doCallouts()</a>.</p>

</div>
</div>
<a id="aebe4081962f547bada77396ee0d56b00" name="aebe4081962f547bada77396ee0d56b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebe4081962f547bada77396ee0d56b00">&#9670;&#160;</a></span>setSockNfmark() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::setSockNfmark </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ip_2forward_8h.html#a97c100bfdf1138ccbdd5de5d0901f720">nfmark_t</a>&#160;</td>
          <td class="paramname"><em>mark</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to set the netfilter mark value of packets. Sets the value on the socket which then gets copied to the packets. Called from <a class="el" href="namespaceIp_1_1Qos.html#ab4475c57093eddcf462cbe95a074230d">Ip::Qos::doNfmarkLocalMiss</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Descriptor of socket to set the mark for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00590">590</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="classComm_1_1Connection.html#a8e53f4d6fd38545947a5aac6efb98fca">Comm::Connection::fd</a>, <a class="el" href="classComm_1_1Connection.html#a60775b8d7a0058df2754c1538ce15856">Comm::Connection::nfmark</a>, and <a class="el" href="namespaceIp_1_1Qos.html#aebe4081962f547bada77396ee0d56b00">setSockNfmark()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classComm_1_1ConnOpener.html#a8c9383cf99505bcfebaca5a1a76e16a5">Comm::ConnOpener::createFd()</a>, <a class="el" href="classClientHttpRequest.html#ab992ab634582a805bf248e2e311403e1">ClientHttpRequest::doCallouts()</a>, <a class="el" href="namespaceIp_1_1Qos.html#a53ab24bd5dd147beeb5d2bbdb5a192de">doNfmarkLocalHit()</a>, <a class="el" href="namespaceIp_1_1Qos.html#ab4475c57093eddcf462cbe95a074230d">doNfmarkLocalMiss()</a>, <a class="el" href="FwdState_8cc.html#a87d3d1f9a4ca177a46d8051ec2241665">ResetMarkingsToServer()</a>, and <a class="el" href="namespaceIp_1_1Qos.html#aebe4081962f547bada77396ee0d56b00">setSockNfmark()</a>.</p>

</div>
</div>
<a id="ac6278e5b1e7c565a08e9f1312b9272b5" name="ac6278e5b1e7c565a08e9f1312b9272b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6278e5b1e7c565a08e9f1312b9272b5">&#9670;&#160;</a></span>setSockNfmark() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::setSockNfmark </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ip_2forward_8h.html#a97c100bfdf1138ccbdd5de5d0901f720">nfmark_t</a>&#160;</td>
          <td class="paramname"><em>mark</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The low level variant of setSockNfmark function to set the netfilter mark value of packets. Avoid if you can use the Connection-based <a class="el" href="namespaceIp_1_1Qos.html#aebe4081962f547bada77396ee0d56b00">setSockNfmark()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Descriptor of socket to set the mark for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00566">566</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad1f6f001d275799243ee96d0b1519d3a">DBG_IMPORTANT</a>, <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="socket_8h.html#a712fdb6a1f96f6ba746ef8da018bb216">xsetsockopt()</a>, and <a class="el" href="xstrerror_8cc.html#a3d643f764de4776e5489d4eb55a99849">xstrerr()</a>.</p>

</div>
</div>
<a id="aaa320dc24fac9b1952edaea803a3dd9a" name="aaa320dc24fac9b1952edaea803a3dd9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa320dc24fac9b1952edaea803a3dd9a">&#9670;&#160;</a></span>setSockTos() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::setSockTos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceComm.html#a2256a253c0fa350403f151d712286d9e">Comm::ConnectionPointer</a> &amp;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ip_2forward_8h.html#a6bd5fd9a27e152eb6dd4faa68729f310">tos_t</a>&#160;</td>
          <td class="paramname"><em>tos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to set the TOS value of packets. Sets the value on the socket which then gets copied to the packets. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Descriptor of socket to set the TOS for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00558">558</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="classComm_1_1Connection.html#a8e53f4d6fd38545947a5aac6efb98fca">Comm::Connection::fd</a>, <a class="el" href="classIp_1_1Address.html#a6533c101544f6cf997406b3676849b3d">Ip::Address::isIPv4()</a>, <a class="el" href="classComm_1_1Connection.html#a60e1b863400f49a2ed17054982561f17">Comm::Connection::remote</a>, <a class="el" href="namespaceIp_1_1Qos.html#aaa320dc24fac9b1952edaea803a3dd9a">setSockTos()</a>, and <a class="el" href="classComm_1_1Connection.html#aae6f01c13a656f6b14441cd5f0dbc1a9">Comm::Connection::tos</a>.</p>

<p class="reference">Referenced by <a class="el" href="classComm_1_1ConnOpener.html#a8c9383cf99505bcfebaca5a1a76e16a5">Comm::ConnOpener::createFd()</a>, <a class="el" href="classClientHttpRequest.html#ab992ab634582a805bf248e2e311403e1">ClientHttpRequest::doCallouts()</a>, <a class="el" href="namespaceIp_1_1Qos.html#adc0228f1ab3df2b3b2bd54fac7f4b89b">doTosLocalHit()</a>, <a class="el" href="namespaceIp_1_1Qos.html#a8c2605e4add905a8db95e453904fc821">doTosLocalMiss()</a>, <a class="el" href="FwdState_8cc.html#a87d3d1f9a4ca177a46d8051ec2241665">ResetMarkingsToServer()</a>, and <a class="el" href="namespaceIp_1_1Qos.html#aaa320dc24fac9b1952edaea803a3dd9a">setSockTos()</a>.</p>

</div>
</div>
<a id="a488037b6f001b644eaf0967989d2b5dc" name="a488037b6f001b644eaf0967989d2b5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a488037b6f001b644eaf0967989d2b5dc">&#9670;&#160;</a></span>setSockTos() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a> Ip::Qos::setSockTos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ip_2forward_8h.html#a6bd5fd9a27e152eb6dd4faa68729f310">tos_t</a>&#160;</td>
          <td class="paramname"><em>tos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stub__fd_8cc.html#a35fed7109d24712d6b86b6134537c7bd">int</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The low level variant of setSockTos function to set TOS value of packets. Avoid if you can use the Connection-based <a class="el" href="namespaceIp_1_1Qos.html#aaa320dc24fac9b1952edaea803a3dd9a">setSockTos()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>Descriptor of socket to set the TOS for </td></tr>
    <tr><td class="paramname">type</td><td>The socket family, AF_INET or AF_INET6 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00518">518</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">References <a class="el" href="debug_2Stream_8h.html#ad1f6f001d275799243ee96d0b1519d3a">DBG_IMPORTANT</a>, <a class="el" href="debug_2Stream_8h.html#ad8cd33a7d75c0efd4d3fd369dc6a8f13">debugs</a>, <a class="el" href="socket_8h.html#a712fdb6a1f96f6ba746ef8da018bb216">xsetsockopt()</a>, and <a class="el" href="xstrerror_8cc.html#a3d643f764de4776e5489d4eb55a99849">xstrerr()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a82d2b4c8d940bbb4853ccafbb33da971" name="a82d2b4c8d940bbb4853ccafbb33da971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82d2b4c8d940bbb4853ccafbb33da971">&#9670;&#160;</a></span>TheConfig</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIp_1_1Qos_1_1Config.html">Ip::Qos::Config</a> Ip::Qos::TheConfig</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="QosConfig_8cc_source.html#l00288">288</a> of file <a class="el" href="QosConfig_8cc_source.html">QosConfig.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="classFwdState.html#a8d1bc18981cea8c1137d8c746f2d510e">FwdState::dispatch()</a>, <a class="el" href="classClientHttpRequest.html#ab992ab634582a805bf248e2e311403e1">ClientHttpRequest::doCallouts()</a>, <a class="el" href="classclientReplyContext.html#ab69b7434816d39d17b0bcf47825704a4">clientReplyContext::doGetMoreData()</a>, <a class="el" href="namespaceIp_1_1Qos.html#a53ab24bd5dd147beeb5d2bbdb5a192de">doNfmarkLocalHit()</a>, <a class="el" href="namespaceIp_1_1Qos.html#ab4475c57093eddcf462cbe95a074230d">doNfmarkLocalMiss()</a>, <a class="el" href="namespaceIp_1_1Qos.html#adc0228f1ab3df2b3b2bd54fac7f4b89b">doTosLocalHit()</a>, <a class="el" href="namespaceIp_1_1Qos.html#a8c2605e4add905a8db95e453904fc821">doTosLocalMiss()</a>, <a class="el" href="FwdState_8cc.html#a342503c4240d7ba751c6ff25a3ff945c">GetNfmarkToServer()</a>, <a class="el" href="FwdState_8cc.html#aa45c1e322b22f1d8d1f428816f3730d7">GetTosToServer()</a>, <a class="el" href="tools_8cc.html#aa2651f5e7d5ea2941a2004f3b115aa5f">restoreCapabilities()</a>, and <a class="el" href="classclientReplyContext.html#ab7bb9cba9e77c4e81cf83757464a4974">clientReplyContext::sendMoreData()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceIp.html">Ip</a></li><li class="navelem"><a class="el" href="namespaceIp_1_1Qos.html">Qos</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
